{"version":3,"sources":["scripts/app-22133220b9.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","FormioProvider","AppConfig","setBaseUrl","apiUrl","state","url","templateUrl","abstract","controller","$scope","$state","$rootScope","$on","err","submission","user","go","otherwise","factory","alerts","addAlert","alert","push","element","addClass","getAlerts","tempAlerts","copy","length","onError","showError","error","message","this","type","path","errors","hasOwnProperty","data","forEach","bind","run","$stateParams","Formio","FormioAlerts","forms","form","currentUser","then","logoutError","logout","isActive","current","name","indexOf","event","toState","authenticated","getToken","substr","preventDefault","$templateCache","put"],"mappings":"CAAA,WACE,YACAA,SAAQC,OAAO,kBACb,aACA,YACA,eACA,WAEDC,QACC,iBACA,qBACA,iBACA,YACA,SACEC,EACAC,EACAC,EACAC,GAEAD,EAAeE,WAAWD,EAAUE,QAEpCL,EACGM,MAAM,QACLC,IAAK,IACLC,YAAa,oBAEdF,MAAM,QACLG,YAAU,EACVF,IAAK,QACLC,YAAa,yBAEdF,MAAM,cACLC,IAAK,SACLC,YAAa,wBACbE,YACE,SACA,SACA,aACA,SACEC,EACAC,EACAC,GAEAF,EAAOG,IAAI,iBAAkB,SAASC,EAAKC,GACpCA,IACLH,EAAWI,KAAOD,EAClBJ,EAAOM,GAAG,eAKjBZ,MAAM,iBACLC,IAAK,YACLC,YAAa,2BACbE,YACE,SACA,SACA,aACA,SACEC,EACAC,EACAC,GAEAF,EAAOG,IAAI,iBAAkB,SAASC,EAAKC,GACpCA,IACLH,EAAWI,KAAOD,EAClBJ,EAAOM,GAAG,eAMpBjB,EAAmBkB,UAAU,QAGhCC,QAAQ,gBACP,aACA,SACEP,GAEA,GAAIQ,KACJ,QACEC,SAAU,SAAUC,GAClBV,EAAWQ,OAAOG,KAAKD,GACnBA,EAAME,QACR5B,QAAQ4B,QAAQ,eAAiBF,EAAME,SAASC,SAAS,aAGzDL,EAAOG,KAAKD,IAGhBI,UAAW,WACT,GAAIC,GAAa/B,QAAQgC,KAAKR,EAG9B,OAFAA,GAAOS,OAAS,EAChBT,KACOO,GAETG,QAAS,QAASC,GAAUC,GAC1B,GAAIA,EAAMC,QACRC,KAAKb,UACHc,KAAM,SACNF,QAASD,EAAMC,QACfT,QAASQ,EAAMI,WAGd,CACH,GAAIC,GAASL,EAAMM,eAAe,UAAYN,EAAMK,OAASL,EAAMO,KAAKF,MACxEzC,SAAQ4C,QAAQH,EAAQN,EAAUU,KAAKP,aAMhDQ,KACC,aACA,SACA,eACA,SACA,YACA,eACA,SACE9B,EACAD,EACAgC,EACAC,EACA1C,EACA2C,GAGAjD,QAAQ4C,QAAQtC,EAAU4C,MAAO,SAASxC,EAAKyC,GAC7CnC,EAAWmC,GAAQzC,IAIhBM,EAAWI,MACd4B,EAAOI,cAAcC,KAAK,SAASjC,GACjCJ,EAAWI,KAAOA,GAItB,IAAIkC,GAAc,WAChBvC,EAAOM,GAAG,cACV4B,EAAaxB,UACXc,KAAM,SACNF,QAAS,mDAIbrB,GAAWC,IAAI,wBAAyBqC,GACxCtC,EAAWC,IAAI,sBAAuB,WACpCF,EAAOM,GAAG,UAIZL,EAAWuC,OAAS,WAClBP,EAAOO,SAASF,KAAK,WACnBtC,EAAOM,GAAG,gBADZ2B,SAESM,IAIXtC,EAAWwC,SAAW,SAAS/C,GAC7B,MAA8C,KAAvCM,EAAO0C,QAAQC,KAAKC,QAAQlD,IAIrCO,EAAWC,IAAI,oBAAqB,SAAS2C,EAAOC,GAClD7C,EAAW8C,gBAAkBd,EAAOe,WACF,SAA9BF,EAAQH,KAAKM,OAAO,EAAG,IACQ,gBAA/BH,EAAQH,KAAKM,OAAO,EAAG,MACvBhD,EAAW8C,gBACbF,EAAMK,iBACNlD,EAAOM,GAAG,wBAOpBrB,QAAQC,OAAO,qBAAqB6C,KAAK,iBAAkB,SAASoB,GAAiBA,EAAeC,IAAI,qBAAqB","file":"scripts/app-22133220b9.js","sourcesContent":["(function() {\n  'use strict';\n  angular.module('formioAppBasic', [\n    'ngSanitize',\n    'ui.router',\n    'ui.bootstrap',\n    'formio'\n  ])\n  .config([\n    '$stateProvider',\n    '$urlRouterProvider',\n    'FormioProvider',\n    'AppConfig',\n    function(\n      $stateProvider,\n      $urlRouterProvider,\n      FormioProvider,\n      AppConfig\n    ) {\n      FormioProvider.setBaseUrl(AppConfig.apiUrl);\n\n      $stateProvider\n        .state('home', {\n          url: '/',\n          templateUrl: 'views/main.html'\n        })\n        .state('auth', {\n          abstract: true,\n          url: '/auth',\n          templateUrl: 'views/user/auth.html'\n        })\n        .state('auth.login', {\n          url: '/login',\n          templateUrl: 'views/user/login.html',\n          controller: [\n            '$scope',\n            '$state',\n            '$rootScope',\n            function(\n              $scope,\n              $state,\n              $rootScope\n            ) {\n              $scope.$on('formSubmission', function(err, submission) {\n                if (!submission) { return; }\n                $rootScope.user = submission;\n                $state.go('home');\n              });\n            }\n          ]\n        })\n        .state('auth.register', {\n          url: '/register',\n          templateUrl: 'views/user/register.html',\n          controller: [\n            '$scope',\n            '$state',\n            '$rootScope',\n            function(\n              $scope,\n              $state,\n              $rootScope\n            ) {\n              $scope.$on('formSubmission', function(err, submission) {\n                if (!submission) { return; }\n                $rootScope.user = submission;\n                $state.go('home');\n              });\n            }\n          ]\n        });\n\n      $urlRouterProvider.otherwise('/');\n    }\n  ])\n  .factory('FormioAlerts', [\n    '$rootScope',\n    function (\n      $rootScope\n    ) {\n      var alerts = [];\n      return {\n        addAlert: function (alert) {\n          $rootScope.alerts.push(alert);\n          if (alert.element) {\n            angular.element('#form-group-' + alert.element).addClass('has-error');\n          }\n          else {\n            alerts.push(alert);\n          }\n        },\n        getAlerts: function () {\n          var tempAlerts = angular.copy(alerts);\n          alerts.length = 0;\n          alerts = [];\n          return tempAlerts;\n        },\n        onError: function showError(error) {\n          if (error.message) {\n            this.addAlert({\n              type: 'danger',\n              message: error.message,\n              element: error.path\n            });\n          }\n          else {\n            var errors = error.hasOwnProperty('errors') ? error.errors : error.data.errors;\n            angular.forEach(errors, showError.bind(this));\n          }\n        }\n      };\n    }\n  ])\n  .run([\n    '$rootScope',\n    '$state',\n    '$stateParams',\n    'Formio',\n    'AppConfig',\n    'FormioAlerts',\n    function(\n      $rootScope,\n      $state,\n      $stateParams,\n      Formio,\n      AppConfig,\n      FormioAlerts\n    ) {\n      // Add the forms to the root scope.\n      angular.forEach(AppConfig.forms, function(url, form) {\n        $rootScope[form] = url;\n      });\n\n      // If no user is defined, then get the current user.\n      if (!$rootScope.user) {\n        Formio.currentUser().then(function(user) {\n          $rootScope.user = user;\n        });\n      }\n\n      var logoutError = function() {\n        $state.go('auth.login');\n        FormioAlerts.addAlert({\n          type: 'danger',\n          message: 'Your session has expired. Please log in again.'\n        });\n      };\n\n      $rootScope.$on('formio.sessionExpired', logoutError);\n      $rootScope.$on('formio.unauthorized', function() {\n        $state.go('home');\n      });\n\n      // Trigger when a logout occurs.\n      $rootScope.logout = function() {\n        Formio.logout().then(function() {\n          $state.go('auth.login');\n        }).catch(logoutError);\n      };\n\n      // Determine if the current state is active.\n      $rootScope.isActive = function(state) {\n        return $state.current.name.indexOf(state) !== -1;\n      };\n\n      // Ensure they are logged in.\n      $rootScope.$on('$stateChangeStart', function(event, toState) {\n        $rootScope.authenticated = !!Formio.getToken();\n        if (toState.name.substr(0, 4) === 'auth') { return; }\n        if (toState.name.substr(0, 11) === 'admin.login') { return; }\n        if(!$rootScope.authenticated) {\n          event.preventDefault();\n          $state.go('auth.login');\n        }\n      });\n    }\n  ]);\n})();\n\nangular.module(\"formioAppTemplate\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<div class=\\\"row\\\"><div class=\\\"jumbotron\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-6 text-center\\\"><p class=\\\"lead\\\">You can easily embed your Forms and Resources into this application using.</p><div><pre>&lt;formio src=\\\"\\'https://yourapp.form.io/user/login\\'\\\"&gt;&lt;/formio&gt;</pre></div><p class=\\\"lead\\\">Need Help?</p><ul class=\\\"list-inline\\\"><li><a class=\\\"btn btn-lg btn-success\\\" target=\\\"_blank\\\" href=\\\"http://help.form.io/embedding/\\\">Embedding</a></li><li><a class=\\\"btn btn-lg btn-success\\\" target=\\\"_blank\\\" href=\\\"http://help.form.io\\\">Documentation</a></li></ul></div><div class=\\\"col-sm-6\\\"><p class=\\\"lead\\\">Example Form</p><div class=\\\"well\\\"><formio src=\\\"\\'https://formio.form.io/contact\\'\\\"></formio></div></div></div></div></div>\");}]);"],"sourceRoot":"/source/"}